<style>
/* Container responsivo */
.search-container {
  position: relative;
  max-width: 600px;
  margin: 20px auto;
  width: 90%;
}

/* Estiliza√ß√£o do campo de busca */
.gsc-input {
  padding: 12px 16px !important;
  font-size: 16px !important; /* Evita zoom no iOS */
  border: 2px solid #ddd !important;
  border-radius: 30px !important;
  background-color: #fff !important;
  color: #333 !important;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1) !important;
  width: 100% !important;
  box-sizing: border-box !important;
  transition: border-color 0.3s, box-shadow 0.3s;
}

.gsc-input:focus {
  border-color: #1976d2 !important;
  box-shadow: 0 2px 12px rgba(25, 118, 210, 0.3) !important;
  outline: none !important;
}

/* Bot√£o de busca */
.gsc-search-button {
  background-color: #1976d2 !important;
  border: none !important;
  border-radius: 30px !important;
  padding: 10px 20px !important;
  color: white !important;
  font-weight: bold !important;
  margin-left: 10px !important;
  height: auto !important;
}

.gsc-search-button:hover {
  background-color: #1565c0 !important;
}

/* Bot√£o de voz */
.voice-btn {
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  background: transparent;
  border: none;
  font-size: 20px;
  cursor: pointer;
  color: #1976d2;
  z-index: 10;
  padding: 4px;
  border-radius: 50%;
  transition: background-color 0.2s;
}

.voice-btn:hover {
  background-color: #f0f0f0;
}

.voice-btn:active {
  color: #d32f2f;
}

/* Ajustes para mobile */
@media (max-width: 600px) {
  .gsc-input {
    font-size: 18px !important; /* Melhor experi√™ncia em mobile */
    padding: 14px 50px 14px 16px !important; /* Espa√ßo para o microfone */
  }

  .gsc-search-button {
    display: none !important; /* Esconde o bot√£o em mobile (busca ao pressionar Enter) */
  }

  .voice-btn {
    right: 16px;
  }
}

/* Esconde o bot√£o de voz se o navegador n√£o suportar SpeechRecognition */
.no-voice-support .voice-btn {
  display: none;
}
</style>
<!-- Script do Google CSE -->
<script async src="https://cse.google.com/cse.js?cx=3439bfa86d61244ab"></script>

<!-- Container da busca -->
<div class="search-container">
  <div class="gcse-search"></div>
  <button id="voice-search-btn" class="voice-btn" title="Pesquisar por voz" aria-label="Pesquisar por voz">
    üé§
  </button>
</div>
<script>
// Verifica suporte √† Web Speech API
const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
const voiceBtn = document.getElementById('voice-search-btn');
const searchContainer = document.querySelector('.search-container');

if (!SpeechRecognition) {
  // Se n√£o for suportado, esconde o bot√£o
  searchContainer.classList.add('no-voice-support');
} else {
  const recognition = new SpeechRecognition();
  recognition.lang = 'pt-BR'; // Altere para 'en-US' se quiser ingl√™s
  recognition.continuous = false;
  recognition.interimResults = false;

  voiceBtn.addEventListener('click', () => {
    voiceBtn.textContent = 'üéôÔ∏è'; // Feedback visual
    recognition.start();
  });

  recognition.onresult = (event) => {
    const transcript = event.results[0][0].transcript;
    // Preenche o campo de busca do Google CSE
    const input = document.querySelector('.gsc-input');
    if (input) {
      input.value = transcript;
      // Dispara evento para o Google CSE reconhecer a mudan√ßa
      const inputEvent = new Event('input', { bubbles: true });
      input.dispatchEvent(inputEvent);
    }
    voiceBtn.textContent = 'üé§';
  };

  recognition.onerror = (event) => {
    console.error('Erro na voz:', event.error);
    voiceBtn.textContent = 'üé§';
    alert('N√£o foi poss√≠vel reconhecer sua voz. Tente novamente.');
  };

  recognition.onend = () => {
    voiceBtn.textContent = 'üé§';
  };
}
</script>
