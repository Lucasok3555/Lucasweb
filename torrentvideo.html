<!DOCTYPE html>  
<html lang="en">  
<head>  
  <meta charset="UTF-8">  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">  
  <title>Video Sharing App</title>  
  <style>  
    body {  
      font-family: Arial, sans-serif;  
      background-color: #f4f4f4;  
    }  
      
    header {  
      background-color: #333;  
      color: #fff;  
      padding: 10px;  
    }  
      
    nav {  
      display: flex;  
      justify-content: center;  
    }  
      
    nav a {  
      color: #fff;  
      margin: 0 15px;  
      text-decoration: none;  
    }  
      
    main {  
      margin: 20px auto;  
      max-width: 800px;  
      background-color: #fff;  
      box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.1);  
      padding: 20px;  
    }  
      
    video {  
      max-width: 100%;  
    }  
  </style>  
</head>  
<body>  
  <header>  
    <h1>Video Sharing App</h1>  
    <nav>  
      <a href="#upload">Upload</a>  
      <a href="#feed">Feed</a>  
      <a href="#connect">Connect</a>  
    </nav>  
  </header>  
  
  <main>  
    <section id="upload">  
      <h2>Upload Video</h2>  
      <input type="file" id="videoInput">  
      <button onclick="uploadVideo()">Upload to Feed</button>  
    </section>  
  
    <section id="feed">  
      <h2>Video Feed</h2>  
      <div id="videoContainer"></div>  
    </section>  
  
    <section id="connect">  
      <h2>Connect with Users</h2>  
      <p>Your User ID: <span id="userID"></span></p>  
      <input type="text" id="connectID" placeholder="Enter User ID">  
      <button onclick="connectUser()">Connect</button>  
      <div id="connectionArea"></div>  
    </section>  
  </main>  
  
  <script>  
    // Generate a unique user ID  
    function generateUID() {  
      const uid = Math.random().toString(36).substring(2, 10);  
      document.getElementById('userID').textContent = uid;  
      return uid;  
    }  
  
    generateUID();  
  
    // Upload video to feed  
    function uploadVideo() {  
      const videoFile = document.getElementById('videoInput').files[0];  
      if (videoFile) {  
        const reader = new FileReader();  
        reader.onload = function(event) {  
          const videoHTML = `<video controls src="${event.target.result}"></video>`;  
          document.getElementById('videoContainer').innerHTML += videoHTML;  
        };  
        reader.readAsDataURL(videoFile);  
      }  
    }  
  
    // Connect with other users  
    function connectUser() {  
      const id = document.getElementById('connectID').value;  
      if (id) {  
        const pc = new RTCPeerConnection();  
        pc.onicecandidate = event => {  
          if (event.candidate) {  
            sendMessage(id, event.candidate.candidate);  
          }  
        };  
  
        pc.onaddstream = event => {  
          const videoElement = document.createElement('video');  
          videoElement.srcObject = event.stream;  
          document.getElementById('connectionArea').append(videoElement);  
        };  
  
        const offer = pc.createOffer();  
        pc.setLocalDescription(offer);  
  
        sendMessage(id, pc.localDescription);  
      }  
    }  
  
    function sendMessage(id, message) {  
      // Implement sending messages to the server or directly to the recipient  
      // For now, we'll just log it  
      console.log(`Sending to ${id}: ${message.sdp || message.candidate}`);  
    }  
  
    // Handle incoming messages and connections  
    function receiveMessage(id, message) {  
      if (message.sdp) {  
        // If it's an SDP message, answer the call  
        const pc = new RTCPeerConnection();  
        pc.ondatachange = event => {  
          console.log(`Data received from ${id}`);  
        };  
  
        pc.setRemoteDescription(new RTCSessionDescription(message));  
  
        pc.createAnswer().then(answer => {  
          pc.setLocalDescription(answer);  
          sendMessage(id, pc.localDescription);  
        });  
      } else if (message.candidate) {  
        // Add the remote candidate to our peer connection  
        const pc = getPeerByUID(id);  
        pc.addIceCandidate(new RTCIceCandidate(message.candidate));  
      }  
    }  
  
    function getPeerByUID(id) {  
      // Simple mapping for demonstration, in a real app this would be managed properly  
      const peers = {};  
      return peers[id];  
    }  
  </script>  
</body>  
</html>  
